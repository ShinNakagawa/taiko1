{"version":3,"sources":["../../src/pages/about/pay/pay.module.ts","../../src/pages/about/pay/pay.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PayPage } from './pay';\n\n@NgModule({\n  declarations: [\n    PayPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PayPage),\n  ],\n  exports: [\n    PayPage\n  ]\n})\nexport class PayPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/pay/pay.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, ViewController, AlertController, NavParams } from 'ionic-angular';\nimport { Observable } from 'rxjs/Observable';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { Pay } from '../../../models/pay.model';\nimport moment from 'moment';\n\n@IonicPage()\n@Component({\n  selector: 'page-pay',\n  templateUrl: 'pay.html'\n})\nexport class PayPage {\n  months: Observable<any[]>;\n  yearPay;\n  payPath = 'pays';\n  userPath = 'users';\n  user: any;\n  payInfo: Array<Pay>;\n\n  constructor(private db: AngularFireDatabase,\n              public viewCtrl:ViewController,\n              public navParams: NavParams,\n              private alertCtrl: AlertController\n            ) {\n    this.user = navParams.get('user');\n    this.yearPay = moment(new Date()).format('YYYY');\n    this.loadingData();\n  }\n\n  loadingData() {\n    this.months = this.db.list(`${this.payPath}/${this.yearPay}/`, ref => ref.orderByChild('userid').equalTo(this.user.uid)).valueChanges();\n    this.months.subscribe(res => {\n      if ( res.length < 1 ) {\n        this.addList();\n      }\n    })\n  }\n\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n  clickStar(item): void {\n    const date = moment(new Date()).format('MMM Do YYYY');\n    if (item.date !== '') {\n      //delete payment record\n      const data = {\n        date: ''\n      };\n      this.db.object(`${this.payPath}/${this.yearPay}/${item.id}/`).update(data)\n        .catch(error => console.log(error));\n      let alert = this.alertCtrl.create({\n        title: 'pay',\n        message: 'delete pay date:',\n        buttons: ['OK']\n      });\n      alert.present();\n    } else {\n      //update payment record\n      const data = {\n        date: date\n      };\n      this.db.object(`${this.payPath}/${this.yearPay}/${item.id}/`).update(data)\n        .catch(error => console.log(error));\n      let alert = this.alertCtrl.create({\n        title: 'pay',\n        message: 'update pay date:',\n        buttons: ['OK']\n      });\n      alert.present();\n    }\n  }\n\n  addList(): void {\n    for (let i = 1; i <= 12; i++) {\n      const data = {\n        userid: this.user.uid,\n        month: i,\n        date: ''\n      };\n      let key = this.db.list(`${this.payPath}/${this.yearPay}/`).push(data).key;\n      //update id as key\n      const dataKey = {\n        id: key\n      };\n      this.db.object(`${this.payPath}/${this.yearPay}/${key}/`).update(dataKey)\n        .catch(error => console.log(error));\n    }\n    let alert = this.alertCtrl.create({\n      title: 'pay',\n      message: 'add pay data:',\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/pay/pay.ts"],"sourceRoot":""}