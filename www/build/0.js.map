{"version":3,"sources":["../../src/pages/about/pay/pay.module.ts","../../src/pages/about/pay/pay.ts","../../src/models/pay.model.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PayPage } from './pay';\n\n@NgModule({\n  declarations: [\n    PayPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PayPage),\n  ],\n  exports: [\n    PayPage\n  ]\n})\nexport class PayPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/pay/pay.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, ViewController, AlertController, NavParams } from 'ionic-angular';\nimport { Observable } from 'rxjs/Observable';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { Pay } from '../../../models/pay.model';\n\n@IonicPage()\n@Component({\n  selector: 'page-pay',\n  templateUrl: 'pay.html'\n})\nexport class PayPage {\n  months: Array<{id: string,\n                 month: number,\n                 date: string}>;\n  yearPay = '2018';\n  payPath = 'pays';\n  userPath = 'users';\n  user: any;\n  payInfo: Array<Pay>;\n\n  constructor(private db: AngularFireDatabase,\n              public viewCtrl:ViewController,\n              public navParams: NavParams,\n              private alertCtrl: AlertController\n            ) {\n    this.user = navParams.get('user');\n    let pays: Observable<Pay[]>;\n    pays = this.db.list(`${this.userPath}/${this.user.uid}/${this.payPath}/`, ref => ref.orderByChild('year').equalTo(this.yearPay)).valueChanges();\n\n    //pays.filter(item => item[0].month === 1).subscribe(res => console.log('res', res))\n\n    //this.pays = this.db.list(`${this.payPath}/${this.yearPay}/`).valueChanges();\n    this.payInfo = [];\n    pays.subscribe(res => {\n      res.forEach(data => {\n        this.payInfo.push(data)\n      })\n    })\n    console.log('constructor', this.payInfo);\n    \n    this.Loaddata();\n  }\n\n  // ionViewDidLoad() {\n  Loaddata() {\n    \n\n    let data = this.payInfo.filter(function test(value) {\n      console.log('value', value)      \n      if (value.year === '2018') {\n        console.log('value', value)\n        return value;\n      }\n    });\n    //data = this.payInfo.filter(item => item.year === '2018');\n    console.log('data', data)\n\n    let test = new Array<Pay>();\n    test = this.payInfo;\n    console.log('test', test)\n    Object.keys(test).map(function(index){\n      console.log('index', index)\n      let payData = new Pay;\n      payData = test[index];\n      if (payData.month === 1){\n        console.log('hdgdhd', payData)\n      }\n    })\n\n    let data1 = null;\n    data1 = this.payInfo.findIndex(item => item.year === '2018');\n    console.log('data1', data1);\n\n    for(let res of this.payInfo){\n      console.log('test123', res);\n    }\n\n    this.payInfo.forEach(res => {\n      console.log('test', res);\n      if (res.month === 1) {\n        console.log('naka', res);\n      }\n    })\n    \n    console.log('ionViewDidLoad', this.payInfo);\n\n    this.months=[];\n    for (let i = 1; i <= 12; i++) {\n      let data = this.payInfo.filter(item => item.month === i);\n      //let data = Object.assign([], payInfo).filter(item => item.month.equalTo(i.toString()))\n      //let data = this.pays.query(orderBy('month').equalTo(i.toString()));\n      //console.log(data);\n      if (data.length > 0) {\n        this.months.push({id: data[0].id, month: i, date: data[0].date});\n      } else {\n        this.months.push({id: '', month: i, date: ''});       \n      }\n    }\n  }\n\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n  clickStar(item): void {\n    console.log(item);\n    if (item.date !== '') {\n      //delete payment record\n      const data = {\n        date: ''\n      };\n      this.db.object(`${this.userPath}/${this.user.uid}/${this.payPath}/${item.id}/`).update(data)\n        .catch(error => console.log(error));\n      let alert = this.alertCtrl.create({\n        title: 'pay',\n        message: 'delete pay date:',\n        buttons: ['OK']\n      });\n      alert.present();\n    } else {\n      if (item.id === '') {\n        //add payment record\n        const timestamp = new Date();\n        const data = {\n          year: this.yearPay,\n          month: item.month,\n          date: timestamp.toString()\n        };\n        let key = this.db.list(`${this.userPath}/${this.user.uid}/${this.payPath}/`).push(data).key;\n        //update id as key\n        const dataKey = {\n          id: key\n        };\n        this.db.object(`${this.userPath}/${this.user.uid}/${this.payPath}/${key}/`).update(dataKey)\n          .catch(error => console.log(error));\n        let alert = this.alertCtrl.create({\n          title: 'pay',\n          message: 'add pay date:',\n          buttons: ['OK']\n        });\n        alert.present();\n      } else {\n        //update payment record\n        const timestamp = new Date();\n        const data = {\n          date: timestamp.toString()\n        };\n        this.db.object(`${this.userPath}/${this.user.uid}/${this.payPath}/${item.id}/`).update(data)\n          .catch(error => console.log(error));\n        let alert = this.alertCtrl.create({\n          title: 'pay',\n          message: 'update pay date:',\n          buttons: ['OK']\n        });\n        alert.present();\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/pay/pay.ts","export class Pay {\n  id?: string;\n  month?: number;\n  year?: string;\n  date?: string; \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/pay.model.ts"],"sourceRoot":""}